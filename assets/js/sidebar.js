document.addEventListener("DOMContentLoaded",()=>{var t,e,o,r,a=document.querySelector(".toc"),n=document.querySelector(".toc-marker path"),i=.1,s=.2;function l(){t=(t=(t=[].slice.call(a.querySelectorAll("li"))).map(function(t){var e=t.querySelector("a"),o=document.getElementById(e.getAttribute("href").slice(1));return{listItem:t,anchor:e,target:o}})).filter(function(t){return!!t.target});var o,r=[];t.forEach(function(t,e){var a=t.anchor.offsetLeft-55,i=t.anchor.offsetTop,s=t.anchor.offsetHeight;0===e?(r.push("M",a,i,"L",a,i+s),t.pathStart=0):(o!==a&&r.push("L",o,i),r.push("L",a,i),n.setAttribute("d",r.join(" ")),t.pathStart=n.getTotalLength()||0,r.push("L",a,i+s)),o=a,n.setAttribute("d",r.join(" ")),t.pathEnd=n.getTotalLength()}),e=n.getTotalLength(),c(),console.log(t[0].listItem)}function c(){var a=window.innerHeight,l=e,c=0,h=0;t.forEach(function(t){var e=t.target.getBoundingClientRect();e.bottom>a*i&&e.top<a*(1-s)?(l=Math.min(t.pathStart,l),c=Math.max(t.pathEnd,c),h+=1,t.listItem.classList.add("visible")):t.listItem.classList.remove("visible"),$("#nav-portfolio-toc").hasClass("visible")?$(".nav-portfolio").show():$(".nav-portfolio").hide()}),h>0&&l<c?l===o&&c===r||(n.setAttribute("stroke-dashoffset","1"),n.setAttribute("stroke-dasharray","1, "+l+", "+(c-l)+", "+e),n.setAttribute("opacity",1)):n.setAttribute("opacity",0),o=l,r=c}window.addEventListener("resize",l,!1),window.addEventListener("scroll",c,!1),l()});